###  

## èµ„æ–™

[éœ€æ±‚æ–‡æ¡£](http://doc.5wei.com/pages/viewpage.action?pageId=58690229)





### ç»„ä»¶ç»“æ„

```javascript
      	  comment_reply
          |			   \
          |		 	 search_bar
        tweet_window	   \
          /		|      \	store
         /		|       \
        /		|	     \
 user-panel tweet-panel  order-panel 
 	|			|			
   	|			|			 
 user-item	   / \		 
   		  tweet   coupon
```



- comment_reply ä½œä¸ºä¸»å®¹å™¨ç»„ç»‡ç»„ä»¶å¹¶å®šä¹‰å¤–éƒ¨æ ·å¼

  - search_bar åŠŸèƒ½ç»„ä»¶  æœç´¢æ¡†

    - store ä¸šåŠ¡ç»„ä»¶è´Ÿè´£æŸ¥æ‰¾å¹¶é€‰æ‹©åº—é“ºä¿¡æ¯

  - tweet_window  ä¸šåŠ¡ç»„ä»¶ï¼Œä½œä¸ºæ•´ä¸ªèŠå¤©çª—å£çš„ä¸šåŠ¡å¤„ç†å®¹å™¨è´Ÿè´£æä¾› VUEX æ•°æ®å¹¶ç›‘æ§å­ç»„ä»¶çš„äº‹ä»¶å¹¶å¤„ç†ã€‚

    - user-panel
      - :user-list   	                 ç”¨æˆ·åˆ—è¡¨æ•°æ®
      - :statis                               è¯„ä»·ç»Ÿè®¡æ•°æ®
      - @tabChange                   tab åˆ‡æ¢äº‹ä»¶
      - @checkFilter                   å¤é€‰çª—å£åˆ‡æ¢äº‹ä»¶
      - @selectUser                    ç”¨æˆ·è¢«é€‰ä¸­äº‹ä»¶
      - **user-item**
        - :user-obj                   ç”¨æˆ·ä¿¡æ¯
        - :user-index               ç”¨æˆ·éå†çš„ç´¢å¼•
        - @selectUser             ç”¨æˆ·é€‰æ‹©äº‹ä»¶


    - tweet-panel
      - selected-user                 ç»„ä»¶é€‰æ‹©çš„å½“å‰ç”¨æˆ·
      - :tweet-list                        èŠå¤©è®°å½•åˆ—è¡¨
      - :load-more-tweets        åŠ è½½æ›´å¤šèŠå¤©è®°å½•æ–¹æ³• 
      - :load-more-coupons     åŠ è½½æ›´å¤šä¼˜æƒ åˆ¸è®°å½•æ–¹æ³•
      - :staff-map                       è¿‡å¾€å›å¤å‘˜å·¥çš„ä¿¡æ¯æ˜ å°„ 
      - :coupon-list                    å¯ç”¨ä¼˜æƒ åˆ¸åˆ—è¡¨
      - :send-msg                       å‘é€æ¶ˆæ¯æ–¹æ³•
      - :send-coupon                 å‘é€ä¼˜æƒ åˆ¸æ–¹æ³• 
      - @openOrder                   æ‰“å¼€è®¢å•çš„æ—¶é—´
      - **tweet**
        - :tweet-obj                æ²Ÿé€šä¿¡æ¯æ•°æ®
        - :user-obj                  ç”¨æˆ·æ•°æ®
        - :staff-map               å›å¤åº—å‘˜çš„æ˜ å°„å¯¹è±¡
        - @openOrder          æ‰“å¼€è®¢å•äº‹ä»¶
      - coupon
        - :coupon-obj            ä¼˜æƒ åˆ¸å®ä½“
        - @selectCoupon     é€‰æ‹©ä¼˜æƒ åˆ¸äº‹ä»¶


    - order-panel
      - :order-obj                        è®¢å•ä¿¡æ¯å®ä½“
      - :show-panel                    æ˜¯å¦æ˜¾ç¤ºè®¢å•é¢æ¿
      - @orderSwitch                 è®¢å•æ”¶èµ·æˆ–å±•å¼€äº‹ä»¶



## VUEX  ç»“æ„è®¾è®¡ï¼ˆcomment.jsï¼‰

### state

```javascript
const state = {
  users_data: {}, //ä¿å­˜æ¥è‡ªæœåŠ¡å™¨çš„æŸ¥è¯¢ç»“æœ
  comment_statis: {}, //è¯„ä»·çš„ç»Ÿè®¡æ•°æ®
  user_map: {}, //å­˜å‚¨æ‰€æœ‰è¯„ä»·æ•°æ®çš„ç¼“å­˜æ•°æ®ï¼Œé€šè¿‡éå† All åˆ—è¡¨è·å¾—ï¼Œç”¨ä½œç”¨æˆ·çŠ¶æ€æ›´æ–°ç¼“å­˜ä½¿ç”¨
  selected_user: {}, // è¢«é€‰ä¸­çš„ç”¨æˆ·å¯¹è±¡
  active_tab:1,     //å½“å‰æ˜¾ç¤ºçš„ tab
  current_user_list: [], //å½“å‰ tab ä¸­æ˜¾ç¤ºçš„ç”¨æˆ·åˆ—è¡¨
  tweet_list: [], //èŠå¤©æ¶ˆæ¯åˆ—è¡¨
  order_obj: {}, //è®¢å•ä¿¡æ¯,
  staff_map:{}, // ç¼“å­˜åº—å‘˜çš„æ•°æ®ä¿¡æ¯
  coupon_list:[], // ä¼˜æƒ åˆ¸åˆ—è¡¨ 
  current_store_id:'', //å½“å‰é€‰æ‹©çš„ åº—é“º Id
  table_obj:{}ï¼Œ       // æ¡Œå°ä¿¡æ¯
};
```



### actions

- è¯·æ±‚è¯„ä»·ç”¨æˆ·ç»Ÿè®¡å’Œæ•°æ®   COMMENT_REPLY_LOAD_COMMS
- è·å–è¿‡æ»¤ç”¨æˆ·åˆ—è¡¨  COMMENT_REPLY_FILTER_COMM_USERS
- è·å–è¯„ä»·ä¿¡æ¯åˆ—è¡¨ COMMENT_REPLY_LOAD_COMM_TWEETS
- è¯·æ±‚è®¢å•ä¿¡æ¯       COMMENT_REPLY_LOAD_ORDER
- è¯·æ±‚æ¡Œå°ä¿¡æ¯       COMMENT_REPLY_LOAD_TABLE
- è¯·æ±‚ä¼˜æƒ åˆ¸ä¿¡æ¯   COMMENT_REPLY_LOAD_COUPONS
- å‘é€ä¼˜æƒ åˆ¸  COMMENT_REPLY_SEND_COUPONS
- ä¿å­˜æ¶ˆæ¯      COMMENT_REPLY_SAVE_TWEET


### mutations

- æ›´æ–°ç”¨æˆ·ç¼“å­˜æ˜ å°„  COMMENT_REPLY_UPDATE_USER_MAP
- æ›´æ–°è¯„ä»·ç»Ÿè®¡æ•°æ® COMMENT_REPLY_UPDATE_COMM_STATIS
- æ›´æ–° tabæ‰€å¯¹åº”ç”¨æˆ·åˆ—è¡¨æ•°æ®COMMENT_REPLY_UPDATE_USER_LIST_MAP
- ä¿®æ”¹å½“å‰é€‰ä¸­çš„ç”¨æˆ·    COMMENT_REPLY_UPDATE_SELECTED_USER
- ä¿®æ”¹å½“å‰ tab ä¸‹ç”¨æˆ·åˆ—è¡¨æ•°æ®       COMMENT_REPLY_UPDATE_CURRENT_USERS
- æ›´æ–°åˆ—è¡¨ä¸­çš„ç”¨æˆ·æ•°æ®    COMMENT_REPLY_UPDATE_USER_UNREAD
- ä¿®æ”¹æ‰€æ¿€æ´»çš„ tab  COMMENT_REPLY_UPDATE_ACTIVE_TAB
- ä¿®æ”¹è¯„ä»·ç”¨æˆ·çš„ç»Ÿè®¡æ¡æ•°  COMMENT_REPLY_UPDATE_COMM_STATIS
- æ›´æ–°å½“å‰æ¶ˆæ¯åˆ—è¡¨   COMMENT_REPLY_UPDATE_TWEETS
- æ›´æ–°è®¢å•æ•°æ®   COMMENT_REPLY_UPDATE_ORDER


- æ›´æ–°åº—å‘˜ä¿¡æ¯  COMMENT_REPLY_UPDATE_STAFF_MAP
- æ›´æ–°ä¼˜æƒ åˆ¸åˆ—è¡¨ä¿¡æ¯ COMMENT_REPLY_UPDATE_COUPON_LIST
- æ›´æ–°é»˜è®¤åº—å‘˜ä¿¡æ¯ COMMENT_REPLY_SET_DEFAULT_STAFF_IN_MAP
- æ›´æ–°æ¡Œå°ä¿¡æ¯  COMMENT_REPLY_UPDATE_TABLE





## åç«¯ Node æ¥å£

#### è·å–è¯„ä»·ç»Ÿè®¡æ•°æ® comment/statis/:store_id

`POST`

- è°ƒç”¨æ¥å£

  - `core.dialog.grade.getCountGroupByScore`

- å‚æ•°

  - merchant_id           å•†æˆ· id
  - store_id                   åº—é“º id
  - start_time               èµ·å§‹æ—¶é—´
  - end_time                ç»“æŸæ—¶é—´
  - search_key             å…³é”®è¯

- è¿”å›

  - map ç±»å‹ç»Ÿè®¡ç»“æœ
    - key                                 1 å·®ï¼Œ2 ä¸­ï¼Œ3 å¥½
    - value                              ç»Ÿè®¡ç»“æœ

  â€‹

#### è·å–è¯„ä»·ç”¨æˆ·åˆ—è¡¨æ•°æ® comment/users/:store_id

`POST`

- è°ƒç”¨æ¥å£

  - `core.dialog.grade.getOrderGradesGroupByScore`

- å‚æ•°å¯¹è±¡ Object

  - merchant_id           å•†æˆ· id
  - store_id                   åº—é“º id
  - start_time               èµ·å§‹æ—¶é—´
  - end_time                ç»“æŸæ—¶é—´
  - search_key             å…³é”®è¯

- è¿”å›

  - map ç±»å‹ç»Ÿè®¡ç»“æœ
    - key                                 1 å·®ï¼Œ2 ä¸­ï¼Œ3 å¥½
    - value                             ç”¨æˆ·åˆ—è¡¨ array

  â€‹



#### è·å–ç”¨æˆ·è¯„ä»·è®°å½• comment/tweets/:store_id

`POST`

- è°ƒç”¨æ¥å£

  - `core.dialog.tweet.getStoreTweets`

- å‚æ•°å¯¹è±¡

  - merchant_id           å•†æˆ· id
  - store_id                   åº—é“º id
  - page_no                  é¡µæ•°
  - size                          å¤§å°
  - user_id                   ç”¨æˆ· id

- è¿”å›

  - èŠå¤©è®°å½•åˆ—è¡¨æ•°ç»„

  â€‹

#### ä¿å­˜èŠå¤©æ¶ˆæ¯ comment/tweet/:store_id

`POST`

- è°ƒç”¨æ¥å£

  - `core.dialog.tweet.toStoreTweet`

- å‚æ•°

  - merchant_id           å•†æˆ· id
  - store_id                   åº—é“º id
  - staff_id                    åº—å‘˜ id
  - tweet_type              æ¶ˆæ¯ç±»å‹    é»˜è®¤ä¸º 2
  - event_type              äº‹ä»¶ç±»å‹    é»˜è®¤ä¸º 0
  - user_id                    ç”¨æˆ· id
  - msg_type               æ¶ˆæ¯ç±»å‹
  - tweet                       æ¶ˆæ¯å†…å®¹

- è¿”å›

  - æ¶ˆæ¯å¯¹è±¡

  â€‹

#### å‘é€ä¼˜æƒ åˆ¸ comment/coupons/:store_id

`POST`

- è°ƒç”¨æ¥å£

  - `core.coupon.coupon4common.sendCoupon`

- å‚æ•°

  - merchant_id           å•†æˆ· id
  - coupon_type_id     ä¼˜æƒ åˆ¸ç±»å‹ id
  - staff_id                    åº—å‘˜ id
  - user_id                    ç”¨æˆ· id
  - src                            æ¥æº    é»˜è®¤ 99
  - src_id                       æ¥æº id é»˜è®¤ ""
  - notify_message      æé†’æ¶ˆæ¯ é»˜è®¤""
  - desc                         å‘åˆ¸æè¿°
  - store_id                   åº—é“º id
  - is_send_notify_message    æ˜¯å¦å‘é€æé†’ä¿¡æ¯ é»˜è®¤ 1
  - is_use_default             æ˜¯å¦ç”¨ä½œé»˜è®¤  é»˜è®¤1
  - num                         æ•°é‡  é»˜è®¤1

- è¿”å›

  - ä¼˜æƒ åˆ¸å¯¹è±¡

  â€‹

#### è·å–è®¢å•è¯¦æƒ… comment/order/:store_id

`POST`

- è°ƒç”¨æ¥å£

  - `core.i5wei.storeOrderQuery.getStoreOrderDetailById`

- ç›´æ¥ä¼ å‚

  - merchant_id           å•†æˆ· id

  - store_id                   åº—é“º id

  - order_id                  èµ·å§‹æ—¶é—´

    â€‹

- è¿”å›

  - è®¢å•å¯¹è±¡



#### è·å–æ¡Œå°è¯¦æƒ… comment/table/:store_id

`POST`

- è°ƒç”¨æ¥å£

  - `core.i5wei.storeTableRecord.getStoreTableRecordById`

- ç›´æ¥ä¼ å‚

  - merchant_id           å•†æˆ· id

  - store_id                   åº—é“º id

  - table_record_id      èµ·å§‹æ—¶é—´

    â€‹

- è¿”å›

  - æ¡Œå°å¯¹è±¡

  â€‹

#### è·å–ä¼˜æƒ åˆ¸åˆ—è¡¨ comment/coupons

`GET`

- è°ƒç”¨æ¥å£

  - `core.coupon.coupon4app.getCouponTypeList`

- ç›´æ¥ä¼ å‚

  - merchant_id           å•†æˆ· id
  - store_id                   åº—é“º id é»˜è®¤ 0 æŸ¥è¯¢æ‰€æœ‰å¯ç”¨çš„ä¼˜æƒ åˆ¸
  - coupon_type_status  ä¼˜æƒ åˆ¸ç±»å‹  é»˜è®¤ 2  å¯ç”¨ä¼˜æƒ åˆ¸
  - staff_id                    åº—å‘˜ id
  - page                        é¡µç 
  - size                          æ•°é‡

- è¿”å›

  - ä¼˜æƒ åˆ¸å¯¹è±¡æ•°ç»„

  â€‹

#### è·å–åº—å‘˜çš„ä¿¡æ¯ comment/staff/:staff_id

`GET`

- è°ƒç”¨æ¥å£

  - `core.merchant.staff.getStaffByStaffIdV2`

- ç›´æ¥ä¼ å‚

  - merchant_id           å•†æˆ· id

  - staff_id                    åº—å‘˜ id

    â€‹

- è¿”å›

  - åº—å‘˜å¯¹è±¡

  â€‹





## åç«¯ Thrift æ¥å£

[æ¥å£æ–‡æ¡£](http://doc.5wei.com/pages/viewpage.action?pageId=59342949)



#### æŸ¥è¯¢ç”¨æˆ·è®¢å•è¯„ä»·æ€»æ•°æ¥å£

`m-dialog/order.thrift` `getCountGroupByScore`

ä¼ å…¥å‚æ•°

```java

/**
 * è®¢å•è¯„åˆ†æŸ¥è¯¢
 */
struct OrderGradeQueryParam{
    /**
     * å•†æˆ·ID
     */
    1:i32 merchantId,
    
    /**
     * åº—é“ºID
     */
    2:i64 storeId,
    
    /**
     * å°±é¤æ—¥æœŸï¼ˆyyyy-MM-ddï¼‰ï¼Œèœå“æ‰€åœ¨æ—¥æœŸå¼€å§‹æ—¶é—´æ¯«ç§’æ•°
     */
    3:optional i64 repastDate,  
    
    /**
     * é¤å…è¥ä¸šæ—¶æ®µIDï¼Œèœå“æ‰€åœ¨æ—¥æœŸè¥ä¸šæ—¶æ®µï¼ˆé»˜è®¤å½“æ—¥æ‰€å¯¹åº”çš„æ—¶é—´æ®µï¼‰
     */ 
    4:optional i64 timeBucketId,    
    
    /**
     * ç”¨æˆ·ID
     */
    5:optional i64 userId,
    
    /**
     * 0=æœªè¯„åˆ†ã€1=å·®ã€2=ä¸­ã€3=å¥½
     */
    6:optional i32 score,
    
    /**
     * è®¢å•è¯„åˆ†å›å¤ç±»å‹
     */
    7:OrderGradeCommentType commentType,
    
    /**
     * ç¬¬å‡ é¡µ
     */
    8:i32 pageNo,
    
    /**
     * æ¯é¡µå¤šå°‘æ¡
     */
    9:i32 size,
    
    /**
     * æŸ¥è¯¢çš„æ—¶é—´èŒƒå›´ï¼Œå¼€å§‹æ—¶é—´
     */
    10:optional i64 startTime;
    
    /**
     * æŸ¥è¯¢çš„æ—¶é—´èŒƒå›´ï¼Œç»“æŸæ—¶é—´
     */
    11:optional i64 endTime;
    
    12:optional string searchKey;
}
```

è¿”å›å¯¹è±¡ Map

```java
{
  1:
  2:
  3:
}

enum OrderScoreType{
    
    /**
     * æœªè¯„åˆ†
     */
    UNKNOWN = 0,
    
    /**
     * å·®
     */
    ONE = 1,
    
    /**
     * ä¸­
     */
    TWO = 2,
    
    /**
     * å¥½
     */
    THREE = 3,
}
```



#### æŒ‰æ¡ä»¶æŸ¥è¯¢ç”¨æˆ·è®¢å•è¯„ä»·è®°å½•

`getOrderGradesGroupByScore`

##### å…¥å‚

```java
/**
 * è®¢å•è¯„åˆ†æŸ¥è¯¢
 */
struct OrderGradeQueryParam{

    /**
     * å•†æˆ·ID
     */
    1:i32 merchantId,
    
    /**
     * åº—é“ºID
     */
    2:i64 storeId,
    
    /**
     * å°±é¤æ—¥æœŸï¼ˆyyyy-MM-ddï¼‰ï¼Œèœå“æ‰€åœ¨æ—¥æœŸå¼€å§‹æ—¶é—´æ¯«ç§’æ•°
     */
    3:optional i64 repastDate,  
    
    /**
     * é¤å…è¥ä¸šæ—¶æ®µIDï¼Œèœå“æ‰€åœ¨æ—¥æœŸè¥ä¸šæ—¶æ®µï¼ˆé»˜è®¤å½“æ—¥æ‰€å¯¹åº”çš„æ—¶é—´æ®µï¼‰
     */ 
    4:optional i64 timeBucketId,    
    
    /**
     * ç”¨æˆ·ID
     */
    5:optional i64 userId,
    
    /**
     * 0=æœªè¯„åˆ†ã€1=å·®ã€2=ä¸­ã€3=å¥½
     */
    6:optional i32 score,
    
    /**
     * è®¢å•è¯„åˆ†å›å¤ç±»å‹
     */
    7:OrderGradeCommentType commentType,
    
    /**
     * ç¬¬å‡ é¡µ
     */
    8:i32 pageNo,
    
    /**
     * æ¯é¡µå¤šå°‘æ¡
     */
    9:i32 size,
    
    /**
     * æŸ¥è¯¢çš„æ—¶é—´èŒƒå›´ï¼Œå¼€å§‹æ—¶é—´
     */
    10:optional i64 startTime;
    
    /**
     * æŸ¥è¯¢çš„æ—¶é—´èŒƒå›´ï¼Œç»“æŸæ—¶é—´
     */
    11:optional i64 endTime;
    
  	/**
     * æŸ¥è¯¢çš„å…³é”®è¯
     */
    12:optional string searchKey;
}
```



##### å‡ºå‚ `map<OrderScoreType, list<UserTweetDTO>>`

```java
struct UserTweetDTO {
    /**  å‘è¯„ä»·çš„ç”¨æˆ·ID */
    1:i64 userId,
    /**  å‘è¯„ä»·çš„ç”¨æˆ·å§“å */
    2:string userName,
    /**  å‘è¯„ä»·çš„ç”¨æˆ·å¤´åƒURL */
    3:string avatar,
    /** è¯„ä»·å†…å®¹ */
    4:string comments,
    /** è¯„ä»·æ—¶é—´ */
    5:i64 tweetTime,
    /** åº—å†…å›å¤è¯„ä»·æ—¶é—´ */
    6:i64 replyTime,
    /** æ­¤ç”¨æˆ·å‘çš„æœªè¢«è¯»çš„æ²Ÿé€šæ¶ˆæ¯ */
    7:i32 unreadNum,
}
```





#### è·å–ç”¨æˆ·æ²Ÿé€šæ¶ˆæ¯åˆ—è¡¨

`m-dialog/tweet.thrift` `getStoreTweets`

##### å…¥å‚

```java
/**
 * æŸ¥è¯¢æ²Ÿé€šè®°å½•Param
 */
struct StoreTweetsQueryParam{

    /**
     * å•†æˆ·ID
     */
    1:i32 merchantId,

    /**
     * åº—é“ºID
     */
    2:i64 storeId,

    /**
     * ç”¨æˆ·ID
     */
    3:i64 userId,

    /**
    * ç¬¬å‡ é¡µ
    */
 	4:i32 pageNo,
 
   /**
    * æ¯é¡µå¤šå°‘æ¡
    */
 	5:i32 size,
}
```

##### å‡ºå‚

```java
struct StoreTweetPageDTO{
    /**
     * æ€»æ¡æ•°
     */
    1:i32 total,
    /**
     * æ€»å…±å¤šå°‘é¡µ
     */
    2:i32 pageNum,
    /**
     * æ¯é¡µå‡ æ¡
     */
    3:i32 size,
    /**
     * ç¬¬å‡ é¡µ
     */
    4:i32 pageNo,
    /**
     * æ²Ÿé€šè®°å½•æ•°æ®
     */
    5:list<StoreTweetDTO> dataList,
}
```



#### ä¿å­˜æ²Ÿé€šæ¶ˆæ¯åˆ—è¡¨

`toStoreTweet`

å…¥å‚

```java
/**
 * æ²Ÿé€šè®°å½•Param
 */
struct StoreTweetParam{

    /**
     * å•†æˆ·ID
     */
    1:i32 merchantId,

    /**
     * åº—é“ºID
     */
    2:i64 storeId,

    /**
     * å®¢æˆ·ç«¯ç±»å‹
     */
    3:i32 clientType,

    /**
     * åº—å‘˜ID
     */
    4:i64 staffId,

    /**
     * æ²Ÿé€šæ¶ˆæ¯ç±»å‹ï¼š0=æœªçŸ¥ï¼Œ1=ç”¨æˆ·ï¼Œ2=åº—é“ºï¼Œ3=ç³»ç»Ÿäº‹ä»¶
     */
    5:TweetType tweetType,

    /**
     * æ²Ÿé€šäº‹ä»¶æ¶ˆæ¯ç±»å‹
     */
    6:TweetEventType eventType,
    
    /**
     * äº‹ä»¶æ¥æºä¿¡æ¯
     */
    7:string eventSrc,

    /**
     * ç”¨æˆ·ID
     */
    8:i64 userId,
    
    /**
     * ä¿¡æ¯ç±»å‹
     */
    9:TweetMsgType msgType,

    /**
     * å†…å®¹
     */
    10:string tweet,
    
}
```



```java


/**
 * æ²Ÿé€šäº‹ä»¶ç±»å‹
 */
enum TweetEventType{
	/**
     * æœªçŸ¥
     */
    UNKNOWN = 0,
    
	/**
     * è®¢å•æ¶ˆè´¹
     */
    PAY_ORDER = 1,
	
	/**
     * è´­ä¹°å……å€¼å¡
     */
    BUY_CARD = 2,
    
    /**
     * è¯„åˆ†å‘ä¼˜æƒ åˆ¸
     */
    GRADE_COUPON = 3,
    
    /**
     * è·å‘ä¼˜æƒ åˆ¸
     */
    SEND_COUPON = 4,
	
	/**
     * åº—å‘˜å–æ¶ˆè®¢å•
     */
    CANCEL_ORDER = 5,
    
    /**
     * åº—å‘˜æ“ä½œè®¢å•é€€æ¬¾
     */
    REFUND_ORDER = 6,
	
}


/**
 * ä¿¡æ¯ç±»å‹
 */
enum TweetMsgType{
	/**
     * æœªçŸ¥
     */
    UNKNOWN = 0,
    
	/**
     * å¾®ä¿¡
     */
    WECHAT = 1,
	
	/**
     * çŸ­ä¿¡
     */
    SMS = 2,
    
    /**
     * é‚®ä»¶
     */
    EMAIL = 3,
}

```





å‡ºå‚

```java

/**
 * æ²Ÿé€šè®°å½•DTO
 */
struct StoreTweetDTO{
    /**
     * æ²Ÿé€šè®°å½•ä¸»é”®ï¼Œå”¯ä¸€
     */
    1:i64 tweetId,
    /**
     * å•†æˆ·ID
     */
    2:i32 merchantId,
    /**
     * åº—é“ºID
     */
    3:i64 storeId,
    /**
     * å®¢æˆ·ç«¯ç±»å‹
     */
    4:i32 clientType,
    /**
     * åº—å‘˜ID
     */
    5:i64 staffId,
    /**
     * æ²Ÿé€šæ¶ˆæ¯ç±»å‹ï¼š0=æœªçŸ¥ï¼Œ1=ç”¨æˆ·ï¼Œ2=åº—é“ºï¼Œ3=ç³»ç»Ÿäº‹ä»¶
     */
    6:i32 tweetType,
    /**
     * æ²Ÿé€šäº‹ä»¶æ¶ˆæ¯ç±»å‹
     */
    7:i32 eventType,
    /**
     * äº‹ä»¶æ¥æºä¿¡æ¯
     */
    8:string eventSrc,
    /**
     * ç”¨æˆ·ID
     */
    9:i64 userId,
    /**
     * ä¿¡æ¯ç±»å‹ï¼š0ï¼æœªçŸ¥ï¼Œ1=å¾®ä¿¡ï¼Œ2=çŸ­ä¿¡ï¼Œ3=é‚®ä»¶
     */
    10:i32 msgType,
    /**
     * å†…å®¹
     */
    11:string tweet,
    /**
     * åˆ›å»ºæ—¶é—´
     */
    12:i64 createTime,
}

```



#### æŸ¥è¯¢åº—é“ºä¼˜æƒ åˆ¸åˆ—è¡¨

`m-coupon/coupon4app.thrift`

`getCouponTypeList`

å…¥å‚

```javascript

1:i32 merchantId,				// å•†æˆ·Id
2:i64 storeId, 					// ä¼ å€¼ä¸º 0
3:coupon_struct.CouponTypeStatus statusEnum, 	//ä¼˜æƒ åˆ¸ç±»å‹
4:i64 staffId, 					// å‘˜å·¥Id
5:i32 page, 					// ?
6:i32 size


/**
 * ä¼˜æƒ åˆ¸çŠ¶æ€ç±»å‹
 */
enum CouponTypeStatus {
    /**
     * å…¨éƒ¨ç±»å‹
     */
    ALL=1,
    /**
     * å¯ç”¨
     */
    AVAILABLE=2,
    /**
     * è¿‡æœŸ
     */
    OVERDUE=3
}


/**
 * ä¼˜æƒ åˆ¸ç±»åˆ«DTO
 */
struct CouponTypeDTO{
    /**
     * ä¼˜æƒ åˆ¸ç±»åˆ«id
     */
    1:i64 couponTypeId,
    /**
     * ä¼˜æƒ åˆ¸åç§°
     */
    2:string couponTypeName,
    /**
     * å•†ç¼–
     */
    3:i32 merchantId,
    /**
     * ä¼˜æƒ åˆ¸çº§åˆ«ï¼ˆ1ï¼šè¶…ç®¡å¯å‘æ”¾ï¼Œ2ï¼šè¶…ç®¡&åº—é•¿å¯å‘æ”¾ï¼Œ3ï¼šè°éƒ½å¯ä»¥å‘ï¼‰
     */
    4:i32 couponLevel,
    /**
     * æ˜¯å¦ä¸ºç³»ç»Ÿé”å®šï¼ˆ1ï¼šç³»ç»Ÿé”å®šä¸å…è®¸å‰ç«¯ä¿®æ”¹ï¼Œ2ï¼šéç³»ç»Ÿé”å®šï¼‰
     */
    5:i32 systemLock,
    /**
     * åˆ›å»ºäººå‘˜å·¥id
     */
    6:i64 staffId,
    /**
     * æŠ˜æ‰£ç±»å‹
     */
    7:i32 discountType,
    /**
     * æŠ˜æ‰£é‡‘é¢
     */
    8:i64 discountAmount,
    /**
     * æŠ˜æ‰£æ¯”ä¾‹
     */
    9:double discountProp,
    /**
     * æœ€å¤§ä½ä½£é‡‘é¢
     */
    10:i64 maxAmount,
    /**
     * æœ€ä½ä½¿ç”¨é‡‘é¢
     */
    11:i64 leastAmount,
    /**
     * æœ‰æ•ˆæœŸç±»å‹
     */
    12:i32 validityTimeType,
    /**
     * æŒ‡å®šæœ‰æ•ˆæœŸ
     */
    13:i64 validityDate,
    /**
     * è‡ªå‘åˆ¸èµ·Nå¤©åå¤±æ•ˆ
     */
    14:i32 extendDay,
    /**
     * æ ‡è®°è¯¥åˆ¸æ˜¯å¦å·²ç»å‘æ”¾è¿‡ï¼ˆ1ï¼šå·²å‘æ”¾ï¼Œ0ï¼šæœªå‘æ”¾ï¼‰
     */
    15:i32 issend,
    /**
     * é»‘ç™½åå•è§„åˆ™ï¼ˆ0ï¼šä¸é™åˆ¶ï¼Œ1ï¼šç™½åå•ï¼Œ2ï¼šé»‘åå•ï¼‰
     */
    16:i32 businessLimitType,
    /**
     * åˆ›å»ºæ—¶é—´
     */
    17:i64 createTime,
    /**
     * æ›´æ–°æ—¶é—´
     */
    18:i64 updateTime,
    /**
     * ä¸šåŠ¡æ¥æº
     */
    19:i32 src,
    /**
     * åº—é“ºçº§åˆ«é»‘ç™½åå•é™åˆ¶ï¼ˆbusinessLimitTypeä¸º1æˆ–2æ—¶æœ‰æ•ˆï¼‰
     */
    20:list<BusinessStoreLimitDTO> businessStoreLimits,
    /**
     * 
     */
    21:i64 couponTypeVersionId,

    /**
     * 
     */
    22:i32 version,

    /**
     * 
     */
    23:i32 latestVersionFlag,

    /**
     * å½“å‰ä¼˜æƒ åˆ¸ç±»å‹ç´¯è®¡å‘æ”¾çš„æ•°é‡
     */
    24:i32 sendNum,

    /**
     * å½“å‰ä¼˜æƒ åˆ¸ç±»å‹å·²è¿‡æœŸæœªè¢«ä½¿ç”¨çš„æ•°é‡
     */
    25:i32 overdueUnUsedNum,

    /**
     * å½“å‰ä¼˜æƒ åˆ¸ç±»å‹ç´¯è®¡è¢«ä½¿ç”¨çš„æ•°é‡
     */
    26:i32 usedNum,

    /**
     * å½“å‰è¢«ä½¿ç”¨çš„åˆ¸ç´¯è®¡ä¼˜æƒ çš„é‡‘é¢
     */
    27:i64 totalDisAmount,
    /**
     * ä¼˜æƒ åˆ¸ç±»å‹å¼€å§‹ä½¿ç”¨æ—¥æœŸ
     */
    28:i64 startTime,
    /**
     * æ˜¯å¦éšä¼˜æƒ åˆ¸ç±»å‹
     */
    29:bool hidden,
    /**
	 * ä¼˜æƒ åˆ¸è‡ªå‘æ”¾Næ—¥å¼€å§‹ç”Ÿæ•ˆ,é»˜è®¤ä¸º0
	 */
    30:i32 startDay,
    
    /**
     * æ˜¯å¦å ‚é£Ÿ
     */
    31:optional bool dinein,
    
    /**
     * æ˜¯å¦æ‰“åŒ…ã€å¤–å¸¦
     */
    32:optional bool takeout,
    
    /**
     * æ˜¯å¦å¤–å–ï¼Œå¤–é€
     */
    33:optional bool sendout,
    /**
     * å¾®ä¿¡å¡åˆ¸Id
     */
    34:string  cardid,
    /**
     * é™åˆ¶æè¿°
     */
    35:string businessLimit,
    
}
```







#### è·å–ä¼˜æƒ åˆ¸æ¨¡æ¿æ¶ˆæ¯ ï¼ˆæœªä½¿ç”¨ï¼‰

`getDefaultTempByMerchantIdAndCouponTypeId`

å…¥å‚

```javascript

1:i32 merchantId,			//å•†æˆ· ID
2:i64 couponTypeId			//ä¼˜æƒ åˆ¸ç±»å‹ ID
```

å‡ºå‚

```JavaScript

String 						//æ¨¡æ¿æ¶ˆæ¯

```


#### å‘é€ä¼˜æƒ åˆ¸

`sendCoupon`

å…¥å‚

```java
1:i32 merchantId, 			//å•†æˆ·Id
2:i64 couponTypeId, 		//ä¼˜æƒ åˆ¸Id
3:i64 operatorId, 			//å‘æ”¾äººId
4:i64 userId, 				//ç”¨æˆ·Id
5:i32 src, 					//?
6:string srcId, 			//?
7:string notifyMessage, 	//?
8:string desc, 
9:i64 storeId, 				//åº—é“ºId
10:bool isSendNotifyMessage, 
11:bool isUseDefault, 		//
12:i32 num					//
  
  
  
/*src : 99
notifyMessage:""
desc:staff.name +"åœ¨æ²Ÿé€šä¸­å‘æ”¾"
isSendNotifyMessage:1
isUseDefault:1
num:å‘äº†å‡ å¼ åˆ¸
*/
```

å‡ºå‚

```java
/**
 * ä¼˜æƒ åˆ¸å®ä½“DTO
 */
struct CouponDTO{
    /**
     * ä¼˜æƒ åˆ¸å®ä½“id
     */
    1:i64 couponId,
    /**
     * å•†ç¼–
     */
    2:i32 merchantId,
    /**
     * ç”¨æˆ·id
     */
    3:i64 userId,
    /**
     * å‘åˆ¸æ“ä½œäººå‘˜å·¥idï¼ˆç³»ç»Ÿå‘æ”¾ä¸º0ï¼‰
     */
    4:i64 staffId,
    /**
     * ä¼˜æƒ åˆ¸ç±»å‹id
     */
    5:i64 couponTypeId,
    /**
     * ä¼˜æƒ åˆ¸åç§°
     */
    6:string couponTypeName,
    /**
     * ä½¿ç”¨çŠ¶æ€ï¼ˆ1ï¼šæœªä½¿ç”¨ï¼Œ2ï¼šå·²ä½¿ç”¨,3ï¼šè¿‡æœŸï¼Œ4ï¼šä½œåºŸï¼Œ5ï¼šè¢«ç”¨æˆ·åˆ é™¤ï¼‰
     */
    7:i32 status,
    /**
     * æœ‰æ•ˆæœŸ
     */
    8:i64 validityTime,
    /**
     * ä¸šåŠ¡æ¥æº
     */
    9:i32 src,
    /**
     * ä¸šåŠ¡æ¥æºid
     */
    10:string srcId,
    /**
     * åˆ›å»ºæ—¶é—´
     */
    11:i64 createTime,
    /**
     * æ›´æ–°æ—¶é—´
     */
    12:i64 updateTime,
    /**
     * é»‘ç™½åå•é™åˆ¶
     */
    13:i32 businessLimitType,
    /**
     * ç”¨æˆ·ä½¿ç”¨è®°å½•idï¼ˆstatus=2æ—¶è¯¥å­—æ®µæœ‰å€¼ï¼‰
     */
    14:i64 couponUserRecordId,
    /**
     * ä¼˜æƒ åˆ¸æè¿°ï¼ˆä¼˜æƒ åˆ¸æ€ä¹ˆå¾—æ¥çš„ï¼‰
     */
    15:string desc,
    /**
     * æŠ˜æ‰£ç±»å‹
     */
    16:DiscountType discountType,
    /**
     * ä½ä½£é‡‘é¢
     */
    17:i64 discountAmount,
    /**
     * æŠ˜æ‰£æ¯”ä¾‹
     */
    18:double discountProp,
    /**
     * 
     */
    19:i32 version,
    /**
     * 
     */
    20:i64 couponTypeVersionId,
    /**
     *  ä¼˜æƒ åˆ¸å¯ç”¨æ—¶é—´
     */
    21:i64 startTime,
}
```



#### æŸ¥è¯¢è®¢å•è¯¦æƒ…æ¥å£

`m-5wei/order.thrift `

`getStoreOrderDetailById`

å…¥å‚

```javascript

1:i32 merchantId, 			//å•†æˆ·Id
2:i64 storeId, 				//åº—é“ºId
3:string orderId			//è®¢å•Id
```

å‡ºå‚

```java

/**
 * åº—é“ºè®¢å•
 */
struct StoreOrderDTO{
    /**
     * è®¢å•IDï¼ˆä¸»é”®ï¼Œå…¨åº“å”¯ä¸€ï¼‰
     */
    1:string orderId,

    /**
     * å•†æˆ·ID
     */
    2:i32 merchantId,

    /**
     * åº—é“ºID
     */
    3:i64 storeId,

    /**
     * æœåŠ¡å‘˜å·¥IDï¼ˆç”¨æˆ·ä¸‹å•æ—¶ï¼Œstaff_idï¼0ï¼‰
     */
    4:i64 staffId,

    /**
     * ä¸‹å•ç”¨æˆ·ï¼ˆå‘˜å·¥ä¸‹å•æ—¶ï¼Œæœ‰å¯¹åº”ç”¨æˆ·æ—¶user_idä¸ç­‰äº0ï¼Œæ— å¯¹åº”ç”¨æˆ·user_idï¼0ï¼‰
     */
    5:i64 userId,

    /**
     * è¥ä¸šæ—¶é—´ID
     */
    6:i64 timeBucketId,

    /**
     * ä¸‹å•ç»ˆç«¯ç±»å‹ï¼ˆéœ€è¦å®šä¹‰å®¢æˆ·ç«¯ç±»å‹æšä¸¾ç±»ï¼‰
     */
    7:i32 clientType,

    /**
     * ä¸‹å•ç”¨æˆ·ç»ˆç«¯ä¼˜æƒ é‡‘é¢ï¼Œä¸€å¤©åªæœ‰ä¸€å•å¯ä»¥ä¼˜æƒ 
     */
    8:i64 userClientCoupon,

    /**
     * åè®®ä¼ä¸šID
     */
    9:i32 enterpriseId,

    /**
     * åè®®ä¼ä¸šæŠ˜æ‰£
     */
    10:double enterpriseRebate,

    /**
     * åè®®ä¼ä¸šæŠ˜æ‰£ï¼Œè®¢å•ä¸­å¤šå°‘é’±å¯ä»¥æŒ‰åè®®ä¼ä¸šæ‰“æŠ˜ï¼ŒæŒ‰è®¢å•è¯¦æƒ…ä¸­å¯ä»¥å®‰åè®®ä¼ä¸šæ‰“æŠ˜çš„éƒ¨åˆ†ç»Ÿè®¡å¾—åˆ°
     */
    11:i64 enterpriseRebateAmount,

    /**
     * åè®®ä¼ä¸šæŠ˜æ‰£æ‰“æŠ˜é¢åº¦
     */
    12:i64 enterpriseRebatePrice,

    /**
     * ç½‘å•æŠ˜æ‰£
     */
    13:double internetRebate,

    /**
     * ç½‘å•æŠ˜æ‰£é™é¢ï¼Œè®¢å•ä¸­å¤šå°‘é’±å¯ä»¥æŒ‰ç½‘å•æ‰“æŠ˜ï¼ŒæŒ‰è®¢å•è¯¦æƒ…ä¸­å¯ä»¥å®‰ç½‘å•æ‰“æŠ˜çš„éƒ¨åˆ†ç»Ÿè®¡å¾—åˆ°
     */
    14:i64 internetRebateAmount,
    
    /**
     * ç½‘å•æ‰“æŠ˜é¢åº¦
     */
    15:i64 internetRebatePrice,

    /**
     * æ•´å•æŠ˜æ‰£æ¯”ä¾‹ï¼Œå¯èƒ½æ˜¯æ´»åŠ¨æˆ–è€…ä¼˜æƒ ï¼Œç”±åº—é“ºå•ç‹¬è®¾ç½®
     */
    16:double totalRebate,

    /**
     * æ•´å•å‡å…é‡‘é¢ï¼Œå¯èƒ½æ˜¯æ´»åŠ¨æˆ–è€…ä¼˜æƒ ï¼Œç”±åº—é“ºå•ç‹¬è®¾ç½®
     */
    17:i64 totalDerate,

    /**
     * ä¸‹å•å¸ç§
     */
    18:i32 orderCurrencyId,

    /**
     * åŸä»·ï¼ˆå«è®¢å•é¡¹ç›®é‡‘é¢åŸä»·+æ‰“åŒ…è´¹+å°ä½è´¹...ç­‰ï¼Œä¸å«å¤–é€è´¹ï¼‰
     */
    19:i64 orderPrice,

    /**
     * æ€»ä»·ï¼ˆå¯ä»¥å‚ä¸æ•´å•æŠ˜æ‰£çš„é‡‘é¢ï¼‰
     */
    20:i64 totalPrice,

    /**
     * æŠ˜åä»·ï¼ˆäº«å—å®Œå„ç§æŠ˜æ‰£ä¹‹åçš„é‡‘é¢ï¼Œä¸å«å¤–é€è´¹ï¼‰
     */
    21:i64 favorablePrice, 
     
    /**
     * åº”ä»˜ï¼ŒpayablePrice=favorablePrice+deliveryFee
     */ 
    22:i64 payablePrice,
    
    /**
     * æ”¯ä»˜è®¢å•ID
     */
    23:string payOrderId,

    /**
     * å®é™…æ”¯ä»˜å¸ç§
     */
    24:i32 actualCurrencyId,

    /**
     * å®ä»˜ï¼Œå®é™…æ”¯ä»˜å¸ç§å¯¹åº”çš„é‡‘é¢
     */
    25:i64 actualPrice,

    /**
     * è®¢å•çš„æ”¯ä»˜çŠ¶æ€ï¼š1=å¾…æ”¯ä»˜ï¼›2=æ”¯ä»˜ä¸­ï¼›3=æ”¯ä»˜å®Œæˆ
     */
    26:i32 payStatus,

    /**
     * 1ï¼æœªé€€æ¬¾ï¼Œ2ï¼ç”¨æˆ·å…¨é¢é€€æ¬¾ï¼šç”¨æˆ·åœ¨æ”¯ä»˜å®Œæˆä¹‹åï¼Œå°šæœªå‘ç”Ÿå®è´¨äº¤æ˜“æ—¶ï¼Œå‘ç”Ÿçš„é€€æ¬¾è®°å½•ï¼›3=å•†æˆ·å…¨é¢é€€æ¬¾ï¼šå¯èƒ½å·²å‘ç”Ÿäº¤æ˜“ï¼Œä½†ç”±äºå¼‚å¸¸æƒ…å†µéœ€è¦åšé€€æ¬¾
     */
    27:i32 refundStatus,

    /**
     * æ˜¯å¦#boolè®¢å•é”å®šï¼š0=æœªé”å®šã€1=å·²é”å®šï¼›ä¾‹å¦‚ï¼Œå¤§é¢è®¢å•é€€æ¬¾é”å®š
     */
    28:bool orderLocked,

    /**
     * äº¤æ˜“çŠ¶æ€æ˜¯å¯¹åŸºç¡€äº¤æ˜“è®¢å•çš„äº¤æ˜“çŠ¶æ€è¿›è¡Œæ‰©å±•ï¼š1ï¼å°šæœªäº¤æ˜“ï¼›2ï¼å·²å¤‡è´§ã€è®¢å•å·²æ”¶åˆ°ï¼Œå¹¶å¤‡è´§ï¼Œç”¨æˆ·ä¸å¯ä»¥éšæ„é€€æ¬¾ï¼Œä¸€èˆ¬ç”¨äºå¤§é¢è®¢å•ã€‘ï¼›3ï¼å·²å¼€å§‹åŠ å·¥ã€å¤–é€æ¥å•è¿›å…¥åŠ å·¥ç¯èŠ‚ï¼Œä¸å¯è‡ªä¸»é€€æ¬¾ã€‘ï¼›4ï¼å·²é€å‡ºã€ä¸“ç”¨äºå¤–å–ï¼Œè¡¨ç¤ºé¤å·²é€å‡ºã€‘ï¼›5ï¼å·²å–å·ã€å ‚é£Ÿã€å¤–å¸¦æ—¶ï¼Œç”¨æˆ·å·²ç»å–äº†å°ç¥¨ã€‘ï¼›6ï¼äº¤æ˜“å®Œæˆã€å·²å–é¤ï¼Œæˆ–è€…å·²ç»é€è¾¾ã€‘
     */
    29:i32 tradeStatus,

    /**
     * å¼€å‘ç¥¨çš„çŠ¶æ€ï¼š1ï¼ä¸å¼€å‘ç¥¨ï¼›2ï¼æœ‰å‘ç¥¨éœ€æ±‚ï¼Œå°šæœªå¼€å‘ç¥¨ï¼›3ï¼å·²å¼€å‘ç¥¨
     */
    30:i32 invoiceStatus,

    /**
     * å‘ç¥¨éœ€æ±‚ï¼šå¦‚æœè®¢å•æœ‰å‘ç¥¨éœ€æ±‚ï¼Œéœ€è¦è®¾ç½®å‘ç¥¨éœ€æ±‚ä¿¡æ¯ï¼Œå‘ç¥¨éœ€æ±‚ä¿¡æ¯çš„æ•°æ®æ ¼å¼å‚è€ƒâ€œè®¢å•å‘ç¥¨éœ€æ±‚â€
     */
    31:string invoiceDemand,

    /**
     * å–é¤æµæ°´å·
     */
    32:i32 takeSerialNumber,

    /**
     * å–é¤éªŒè¯ç 
     */
    33:string takeCode,

    /**
     * å–é¤æ¨¡å¼ï¼Œè®¢å•çš„å–é¤æ¨¡å¼ï¼š1ï¼å ‚é£Ÿï¼›2ï¼å¤–å¸¦ï¼›3ï¼å ‚é£Ÿ+å¤–å¸¦ï¼›4ï¼å¤–é€
     */
    34:i32 takeMode,
    
    /**
     * å–é¤ç»ˆç«¯ç±»å‹ï¼ˆéœ€è¦å®šä¹‰å®¢æˆ·ç«¯ç±»å‹æšä¸¾ç±»ï¼‰
     */
    35:i32 takeClientType,

    /**
     * åº“å­˜ä¿ç•™çŠ¶æ€ï¼Œåº“å­˜ä¿ç•™æ˜¯åœ¨ä¸‹å•åˆ°æ”¯ä»˜æœŸé—´çš„ä¸€æ®µæ—¶é—´å†…ï¼Œæ˜¯å¦ç»™ç”¨æˆ·ä¿ç•™åº“å­˜ï¼š1ï¼æ— ä¿ç•™ï¼›2ï¼ä¿ç•™ï¼›3ï¼å·²æ‰£å‡ã€æ”¯ä»˜æˆåŠŸï¼Œè¦æ­£å¼æ‰£å‡åº“å­˜ã€‘
     */
    36:i32 takeupStatus,

    /**
     * å°±é¤æ—¥æœŸï¼Œå³èœå•æ‰€åœ¨æ—¥æœŸå¼€å§‹æ—¶é—´æ¯«ç§’æ•°
     */
    37:i64 repastDate,

    /**
     * æ›´æ–°æ—¶é—´
     */
    38:i64 updateTime,

    /**
     * æ–°å¢æ—¶é—´
     */
    39:i64 createTime,
    
    /**
     * è®¢å•å­é¡¹ç›®åˆ—è¡¨
     */
    40:optional list<StoreOrderItemDTO> storeOrderItemDTOs,
    
    /**
     * åº—é“ºåç§°
     */
    41:optional string storeName,
    
    /**
     * è¥ä¸šæ—¶æ®µ
     */
    42:optional menu_dto.StoreTimeBucketDTO storeTimeBucketDTO,
    
    /**
     * è®¢å•æ“ä½œæ—¥å¿—
     */
    43:optional list<StoreOrderOptlogDTO> storeOrderOptlogDTOs,
    
    /**
     * è®¢å•æ”¯ä»˜ä¿¡æ¯
     * cash_received_amount,ç°é‡‘æ”¶æ¬¾é‡‘é¢
     * cash_amount, ç°é‡‘æ”¯ä»˜é‡‘é¢
     * coupon_amount, ä¼˜æƒ åˆ¸æŠµæ‰£é‡‘é¢
     * prepaid_card_amount, å……å€¼å¡æ”¯ä»˜é‡‘é¢
     * user_account_amount, ç«ä»˜è´¦æˆ·æ”¯ä»˜é‡‘é¢
     * alipay_amount, æ”¯ä»˜å®é‡‘é¢
     * wechat_amount, å¾®ä¿¡æ”¯ä»˜é‡‘é¢
     * ipos_amount, æ™ºèƒ½posæ”¯ä»˜é‡‘é¢
     * yjpay_amount, ä¸€é”®æ”¯ä»˜é‡‘é¢
     * pos_amount, æ™®é€šposæ”¯ä»˜é‡‘é¢
     * public_transfer_amount, å¯¹å…¬è½¬è´¦æ”¯ä»˜é‡‘é¢
     * dynamic_pay_method_id, è‡ªå®šä¹‰æ”¯ä»˜æ–¹å¼ID
     * dynamic_pay_method_name, è‡ªå®šä¹‰æ”¯ä»˜åç§°
     * dynamic_pay_amount, è‡ªå®šä¹‰æ”¯ä»˜é‡‘é¢
     * dynamic_pay_actual_amount, è‡ªå®šä¹‰æ”¯ä»˜å®é™…é‡‘é¢
     * dynamic_pay_type, è‡ªå®šä¹‰æ”¯ä»˜åˆ¸ç±»å‹
     * ====å¾®ä¿¡æ”¯ä»˜ä¿¡æ¯====
     * prepay_id, å¾®ä¿¡çš„é¢„æ”¯ä»˜id
     * app_id, å…¬ä¼—å¸å·id
     * timestamp,æ—¶é—´æˆ³
     * nonce_str, éšæœºå­—ç¬¦ä¸²
     * sign_type, ç­¾åç±»å‹
     * sign,ç­¾å
     */
    44:optional map<string,string> orderPayInfo,
    
    /**
     * è®¢å•é€€æ¬¾ä¿¡æ¯
     * amount_refund, è®¢å•é€€æ¬¾æ€»é‡‘é¢
     * cash_refund, ç°é‡‘é€€æ¬¾
     * user_account_refund, ç«ä»˜è´¦æˆ·é€€æ¬¾
     * prepaid_card_refund, é¢„ä»˜è´¹å¡é€€æ¬¾
     * alipay_refund, æ”¯ä»˜å®é€€æ¬¾
     * wechat_refund, å¾®ä¿¡æ”¯ä»˜é€€æ¬¾
     * yj_refund,ä¸€é”®æ”¯ä»˜é€€æ¬¾
     * ipos_refund,æ™ºèƒ½posé€€æ¬¾
     * coupon_refund, ä¼˜æƒ åˆ¸é€€æ¬¾
     * voucher_amount, åˆ¸é¢é¢
     * voucher_face_value, åˆ¸å®é™…è´­ä¹°é‡‘é¢
     * voucher_refund, åˆ¸é€€æ¬¾
     * voucher_name, åˆ¸åç§°
     * ====refundStoreOrderMode====
     * refund_record_id, é€€æ¬¾è®°å½•ID
     * refund_amount, æœ¬æ¬¡é€€æ¬¾é‡‘é¢
     */
    45:optional map<string,string> orderRefundInfo,
    
    /**
     * ç”¨æˆ·ä½™é¢ä¿¡æ¯
     * prepaid_card_balance, å……å€¼å¡ä½™é¢
     * user_account_balance, ç«ä»˜è´¦æˆ·ä½™é¢
     * currency_id, å¸ç§
     * coupon_type_id, ä¼˜æƒ åˆ¸ç±»å‹ID
     * coupon_type_name, ä¼˜æƒ åˆ¸ç±»å‹åç§°
     * coupon_discount_amount, ä¼˜æƒ åˆ¸ç±»å‹æŠµæ‰£é‡‘é¢
     */
    46:optional map<string,string> userRemainInfo,
    
    /**
     * å¤–é€è´¹
     */
    47:i64 deliveryFee,
    
    /**
     * å¤–é€ç›¸å…³å‚æ•°
     */
    48:optional StoreOrderDeliveryDTO storeOrderDeliveryDTO,
    
    /**
     * ä¸‹å•æ—¶é—´
     */
    49:optional i64 placeOrderTime,
    
    /**
     * ä»˜æ¬¾æ—¶é—´
     */
    50:optional i64 payOrderTime,
    
    /**
     * é€€æ¬¾æ—¶é—´
     */
    51:optional i64 refundOrderTime,
    
    /**
     * å–å·æ—¶é—´
     */
    52:optional i64 takeSerialTime,
    
    /**
     * å‡ºé¤æ—¶é—´
     */
    53:optional i64 mealCheckoutTime,
    
    /**
     * äº¤æ˜“å®Œæˆæ—¶é—´
     */
    54:optional i64 tradeFinishTime,
    
    /**
     * æ˜¯å¦é™åˆ¶å–é¤æ—¶é—´
     */
    55:optional bool limitMealTime,
    
    /**
     * èµŠé”€çŠ¶æ€ï¼š0=æœªèµŠè´¦ï¼›1ï¼æœªé”€è´¦ï¼›2ï¼é”€è´¦æˆåŠŸï¼›3ï¼èµŠè´¦æ’¤é”€
     */
    56:i32 creditStatus,
    
    /**
     * èµŠè´¦ç±»å‹ï¼š0=æœªçŸ¥ï¼Œ1ï¼åè®®ä¼ä¸šï¼Œ2ï¼å…¬å…³è´¹ç”¨
     */
    57:i32 creditType,
    
    /**
     * é¤ç‰Œå·ï¼Œä¸º0åˆ™è¡¨ç¤ºæ²¡æœ‰é¤ç‰Œå·
     */
    58:i32 siteNumber,
    
    /**
     * æ‰“åŒ…è´¹ï¼ˆè®¢å•é¡¹ç›®çš„æ‰“åŒ…è´¹æ€»å’Œï¼‰
     */
    59:i64 packageFee,
    
    /**
     * æ˜¯å¦ä¼šäº§ç”Ÿæ‰“åŒ…è´¹
     */
    60:bool producePackageFee,
    
    /**
     * äº¤æ˜“è®¢å•å˜æ›´è¡¨
     */
    61:optional StoreOrderSwitchDTO storeOrderSwitchDTO,
    
    /**
     * æŠ˜æ‰£ç±»å‹ï¼š1=ä¼ä¸šæŠ˜æ‰£ï¼Œ2=ç½‘å•æŠ˜æ‰£ï¼Œ3=æ•´å•æŠ˜æ‰£
     */
    62:i32 rebateType,
    
    /**
     * è®¢å•å¤‡æ³¨
     */
    63:string orderRemark,
    
    /**
     * æ•´å•æŠ˜æ‰£æ‰“æŠ˜é¢åº¦
     */
    64:i64 totalRebatePrice,
    
    /**
     * è®¢å•å¯ä½¿ç”¨ä¼˜æƒ åˆ¸é‡‘é¢
     */
    65:i64 orderCouponPrice,    
    
    /**
     * æ˜¯å¦ä¸ºè¡¥å½•ï¼š0=ä¸æ˜¯ï¼Œ1=æ˜¯
     */
    66:bool backOrder,
    
    /**
     * æ˜¯å¦è·³è¿‡å–å·ç¯èŠ‚ï¼š0=ä¸æ˜¯ï¼Œ1=æ˜¯
     */
    67:bool skipTakeCode,
    
    /**
     * æ˜¯å¦æ‰‹åŠ¨è®¾ç½®äº†å…¥å®¢æ•°ï¼š0=ä¸æ˜¯ï¼Œ1=æ˜¯
     */
    68:bool enableManualCustomerTraffic,
    
    /**
     * è®¢å•çš„å…¥å®¢æ•°
     */
    69:i32 customerTraffic,
    
    /**
     * æ˜¯å¦åŠ èœï¼š0=ä¸æ˜¯ï¼Œ1=æ˜¯
     */
    70:bool enableAddDishes,
    
    /**
     * å°ä½è´¹
     */
    71:i64 tableFee,

    /**
     * ä¼šå‘˜ä»·æ€»å…±ä¼˜æƒ 
     */
    72:i64 memberRebatePrice,

    /**
     * ç”¨æˆ·ç‚¹é¤å¤‡æ³¨
     */
    73:string userRemark,
    
    /**
     * æ­¤è®¢å•æ˜¯å¦åä»˜è´¹ï¼š0=å¦ï¼Œ1=æ˜¯
     */
    74:bool payAfter,
    
    /**
     * æ¡Œå°è®°å½•ID
     */
    75:optional i64 tableRecordId,
    
    /**
     * çˆ¶è®¢å•id
     */
    76:optional string parentOrderId,
    
    /**
     * æ¡Œå°è®°å½•ä¿¡æ¯
     */
    77:optional StoreOrderTableRecordDTO storeOrderTableRecordDTO,

    /**
     * è‡ªåŠ©ä¸‹å•ç”¨æˆ·
     */
    78:i5wei_share_dto.I5weiUserDTO userDTO,

    /**
     * ä¸‹å•æœåŠ¡å‘˜
     */
    79:i5wei_share_dto.StoreTableStaffDTO staffDTO,
    
    /**
     * è®¢å•å®é™…æ”¯ä»˜ä¿¡æ¯
     */
    80:optional StoreOrderActualPayDTO storeOrderActualPayDTO,
    
    /**
     * é€€èœè¯¦æƒ…
     */
    81:optional list<StoreOrderRefundItemDTO> storeOrderRefundItemDTOs,
    
    /**
     * å‘ç¥¨ä¿¡æ¯
     */
    82:optional order_invoice_dto.StoreOrderInvoiceDTO storeOrderInvoiceDTO,
    
    /**
     * å•å“æŠ˜æ‰£æ€»å…±ä¼˜æƒ 
     */
    83:i64 promotionPrice,
    
    /**
     * ç»„åˆä»»åŠ¡:ä¹°å……å€¼å¡çš„ä¿¡æ¯
     */
    84:optional BuyPrepaidCardInfoDTO buyPrepaidCardInfoDTO,
    
	/**
     * é”å®šçŠ¶æ€ï¼š0=æœªé”å®šï¼Œ1=æ‰‹åŠ¨é”å®šï¼Œ2=è‡ªåŠ¨é”å®š
     */
    85:i32 orderLockStatus,
    
    /**
     * è®¢å•è‡ªåŠ¨é”å®šæ—¶é—´
     */
    86:i64 autoLockTime,
    
    /**
     * å®šæ—¶å–æ—¶é—´
     */
    87:i64 timingTakeTime,
    
    /**
     * å®šæ—¶å–ç»“æŸæ—¶é—´
     */
    88:optional i64 timingTakeEndTime,
    
    /**
     * å ‚é£Ÿæ¬¡æ•°
     */
    89:i32 ordersDineIn,
    
    /**
     * æ‰“åŒ…è‡ªå–æ¬¡æ•°ï¼ˆå«å¿«å–ï¼‰
     */
    90:i32 ordersTakeOut,
    
    /**
     * å ‚é£Ÿ+æ‰“åŒ…æ¬¡æ•°
     */
    91:i32 ordersInAndOut,
    
    /**
     * å¤–å–æ¬¡æ•°ï¼ˆä»…è€ƒè™‘é€šè¿‡å…¬ä¼—å·è´­ä¹°ï¼‰
     */
    92:i32 ordersSendOut,
    
    /**
     * æ‰€æœ‰å·²æ¶ˆè´¹æ¬¡æ•°ï¼ˆå³ï¼šå ‚é£Ÿ+æ‰“åŒ…+å¤–å–æ¬¡æ•°ï¼‰
     */
    93:i32 ordersTrade,

    /**
     * åè®®ä¼ä¸šæŠ˜æ‰£ç±»å‹
     */
    94:i32 enterpriseRebateType,

    /**
     * èµ·èœçŠ¶æ€ @StoreSendTypeEnum
     */
    95:i32 sendType,
    
    /**
     * èµ·èœæ—¶é—´
     */
    96:i64 sendTime,
	
	/**
     * æŠ˜æ‰£æ´»åŠ¨å‚ä¸çš„é‡‘é¢
     */
    97:i64 promotionRebateAmount,
    
    /**
     * æŠ˜æ‰£æ´»åŠ¨å‡å…é‡‘é¢
     */
    98:i64 promotionRebatePrice,
    
    /**
     * æ»¡å‡æ´»åŠ¨ID
     */
    99:i64 promotionReduceId,
    
    /**
     * æ»¡å‡æ´»åŠ¨æœ€ä½æ¶ˆè´¹é‡‘é¢
     */
    100:i64 promotionReduceQuota,
    
    /**
     * æ»¡å‡æ´»åŠ¨å‚ä¸çš„é‡‘é¢
     */
    101:i64 promotionReduceAmount,
    
    /**
     * æ»¡å‡æ´»åŠ¨å‡å…é‡‘é¢
     */
    102:i64 promotionReducePrice,
    
    /**
     * èµ èœå…å•é‡‘é¢
     */
    103:i64 gratisPrice,
    
    /**
     * è®¢å•ä¼˜æƒ åˆ¸å‡å…é‡‘é¢
     */
    104:i64 orderCouponDerate,
    
    /**
     * è®¢å•ä¿ƒé”€ä¿¡æ¯åˆ—è¡¨
     */
    105:optional list<StoreOrderPromotionDTO> storeOrderPromotionDTOs,
    
    /**
     * æ»¡å‡æ´»åŠ¨æ ‡é¢˜
     */
    106:optional string promotionReduceTitle,

     /**
     * å¤–å–ç±»å‹
     * 0=å…¬ä¼—å·ï¼Œ1=ç¾å›¢ï¼Œ2=é¥¿äº†ä¹ˆï¼Œ3=ç™¾åº¦
     */
    107:i32 waimaiType,

    /**
    * è‡ªæç‚¹ç›¸å…³ä¿¡æ¯
    **/
    108:optional store_pickup_site_dto.StorePickupSiteBaseDTO storePickupSite,

    /**
    * è®¾å¤‡ID
    **/
    109:optional i32 appId,
    /**
     * èµ èœè¯¦æƒ…
     */
    110:optional list<StoreOrderGiftItemDTO> storeOrderGiftItemDTOs,
}
```



#### æŸ¥è¯¢æ¡Œå°è¯¦æƒ…æ¥å£

`m-5wei/table_record.thrift `

`getStoreTableRecordById`

å…¥å‚

```javascript
1:i32 merchantId, 			//å•†æˆ· Id
2:i64 storeId, 				//åº—é“º Id
3:i64 tableRecordId			//æ¡Œå° Id
```

å‡ºå‚

```java
/**
 * æ¡Œå°è®°å½•
 */
struct StoreTableRecordDTO{
    
    /**
     * æ¡Œå°è®°å½•IDï¼ˆä¸»é”®å…¨åº“å”¯ä¸€ï¼‰
     */
    1:i64 tableRecordId,

    /**
     * å•†ç¼–
     */
    2:i32 merchantId,

    /**
     * åº—é“ºid
     */
    3:i64 storeId,

    /**
     * æ‰€åœ¨æ¡Œå°
     */
    4:i64 tableId,

    /**
     * å°±é¤æ—¥æœŸ
     */
    5:i64 repastDate,

    /**
     * è¥ä¸šæ—¶æ®µID
     */
    6:i64 timeBucketId,

    /**
     * ä¸»è®¢å•id
     */
    7:string orderId,

    /**
     * æ‹¼æ¡Œåºå·
     */
    8:i32 tableRecordSeq,

    /**
     * å¼€å°æ—¶é—´
     */
    9:i64 tableRecordTime,

    /**
     * æ¡Œå°è®°å½•çŠ¶æ€:0=ç­‰å¾…ç‚¹é¤,1=ç­‰å¾…ä¸Šèœ,2=ä¸Šèœä¸­,3=èœä¸Šé½,4=å·²ç»“è´¦,5=å·²æ¸…å°
     */
    10:i32 tableRecordStatus,

    /**
     * ä»˜æ¬¾çŠ¶æ€:0=æœªä»˜,1=éƒ¨åˆ†æ”¯ä»˜,2=å…¨é¢æ”¯ä»˜(ä»˜æ¸…),3=æœ‰é€€æ¬¾
     */
    11:i32 payStatus,

    /**
     * å°±é¤äººæ•°
     */
    12:i32 customerTraffic,

    /**
     * é»˜è®¤æ¡Œå°æœåŠ¡å‘˜
     */
    13:i64 staffId,

    /**
     * å¼€å°æœåŠ¡å‘˜
     */
    14:i64 createTableStaffId,

    /**
     * ç»“è´¦æœåŠ¡å‘˜
     */
    15:i64 settleStaffId,

    /**
     * æ¸…å°æœåŠ¡å‘˜
     */
    16:i64 clearTableStaffId,

    /**
     * å¼€å°ç”¨æˆ·id
     */
    17:i64 createTableUserId,

    /**
     * ç»“è´¦ç”¨æˆ·id
     */
    18:i64 settleUserId,

    /**
     * ç‚¹é¤å¼€å§‹æ—¶é—´
     */
    19:i64 orderTime,

    /**
     * é¦–æ¬¡ä¸Šèœæ—¶é—´
     */
    20:i64 firstUpTime,

    /**
     * èœä¸Šé½æ—¶é—´
     */
    21:i64 lastUpTime,

    /**
     * æ¸…å°æ—¶é—´
     */
    22:i64 clearTableTime,

    /**
     * åˆå°ç›®æ ‡å¼€å°è®°å½•ID
     */
    23:i64 mergeTableRecordId,

    /**
     * åˆå°æ—¶é—´
     */
    24:i64 mergeTableTime,

    /**
     * æ¡Œå°è®°å½•åˆ›å»ºæ—¶é—´
     */
    25:i64 createTime,

    /**
     * æ›´æ–°æ—¶é—´
     */
    26:i64 updateTime,

    /**
     * åŒºåŸŸid
     */
    27:i64 areaId,

    /**
     * ç»“è´¦æ—¶é—´
     */
    28:i64 settleTime,

    /**
     * æ¡Œå°è®°å½•æ•´å•æŠ˜æ‰£æ¯”ä¾‹
     */
    29:double discountPro,

    /**
     * æ¡Œå°è®°å½•æ•´å•å‡å…é‡‘é¢
     */
    30:i64 discountAmount,

    /**
     * æ¡Œå°è®°å½•ä¸»è®¢å•çš„æµæ°´å·
     */
    31:i32 takeSerialNumber,

    /**
     * æ¡Œå°åç§°
     */
    32:string tableName,

    /**
     * åŒºåŸŸåç§°
     */
    33:string areaName,

    /**
     * åˆå°æœåŠ¡å‘˜
     */
    34:i64 mergeStaffId,

    /**
     * è½¬å°æœåŠ¡å‘˜
     */
    35:i64 transferStaffId,

    /**
     * æ¡Œå°åŸä»·
     */
    36:i64 tablePrice,

    /**
     * æ¡Œå°å·²æ”¶å–å°ä½è´¹
     */
    37:i64 tableFee,

    /**
     * æ¡Œå°å·²äº«å—æŠ˜æ‰£é‡‘é¢
     */
    38:i64 alreadyDiscountAmount,

    /**
     * å·²é€€èœé‡‘é¢
     */
    39:i64 refundChargeItemPrice,

    /**
     * åº”ä»˜é‡‘é¢
     */
    40:i64 payAbleAmount,

    /**
     * å·²ä»˜é‡‘é¢
     */
    41:i64 paidAmount,

    /**
     * ä»¥é€€æ¬¾é‡‘é¢
     */
    42:i64 refundAmount,

    /**
     * å¾…å‡ºé¤æ•°é‡
     */
    43:i32 mealTakeupNum,

    /**
     * å·²å‡ºé¤æ•°é‡
     */
    44:i32 mealCheckoutNum,

   /**
     * åŒºåŸŸ
     */
    45:table_dto.StoreAreaDTO storeAreaDTO,

    /**
     * æ¡Œå°
     */
    46:table_dto.StoreTableDTO storeTableDTO,

    /**
     * ä¸»è®¢å•
     */
    47:order_dto.StoreOrderDTO masterStoreOrderDTO,

    /**
     * å­è®¢å•åˆ—è¡¨
     */
    48:list<order_dto.StoreOrderDTO> subStoreOrderDTOList,

    /**
     * é€€èœåˆ—è¡¨
     */
    49:list<StoreTableRecordRefundDTO> storeTableRecordRefundDTOList,

    /**
     * æ¡Œå°é»˜è®¤æœåŠ¡å‘˜
     */
    50:i5wei_share_dto.StoreTableStaffDTO tableRecordStaffDTO,

    /**
     * å¼€å°æœåŠ¡å‘˜
     */
    51:i5wei_share_dto.StoreTableStaffDTO createTableRecordStaffDTO,

    /**
     * ç»“è´¦æœåŠ¡å‘˜
     */
    52:i5wei_share_dto.StoreTableStaffDTO settleTableRecordStaffDTO,

    /**
     * æ¸…å°æœåŠ¡å‘˜
     */
    53:i5wei_share_dto.StoreTableStaffDTO clearTableRecordStaffDTO,

    /**
     * è‡ªåŠ©å¼€å°ç”¨æˆ·
     */
    54:i5wei_share_dto.I5weiUserDTO createTableRecordUserDTO,

    /**
     * è‡ªåŠ©ç»“è´¦ç”¨æˆ·
     */
    55:i5wei_share_dto.I5weiUserDTO settleTableRecordUserDTO,

    /**
     * è¥ä¸šæ—¶æ®µ
     */
    56:menu_dto.StoreTimeBucketDTO storeTimeBucketDTO,

    /**
     * åˆå°æœåŠ¡å‘˜
     */
    57:i5wei_share_dto.StoreTableStaffDTO mergeStaffDTO,

    /**
     * è½¬å°æœåŠ¡å‘˜
     */
    58:i5wei_share_dto.StoreTableStaffDTO transferStaffDTO,

    /**
     * æ¡Œå°è®°å½•æ”¯ä»˜è¯¦æƒ…
     */
    59:PayDetailInfoDTO payDetailInfoDTO,

    /**
     * æ¡Œå°è®°å½•é€€æ¬¾è¯¦æƒ…
     */
    60:RefundDetailInfoDTO refundDetailInfoDTO,

    /**
     * ç»“è´¦å•
     */
    61:SettleTableRecordDTO settleTableRecordDTO,

    /**
     * èœæ˜¯å¦å·²ä¸Šé½
     */
    62:bool allTakeOut,

    /**
     * æ¡Œå°è®°å½•åˆè®¡é€€æ¬¾é‡‘é¢ï¼ˆåŒ…æ‹¬ç»“è´¦é€€æ¬¾å’Œè®¢å•ç®¡ç†é€€æ¬¾ï¼‰
     */
    63:i64 totalRefundAmount,

    /**
     * èµ·èœçŠ¶æ€ 1=åŠ æ€¥ 2=èµ·èœ 3=å³èµ· ï¼ˆé»˜è®¤ï¼Œå³å’Œç°åœ¨å–å®Œå·å°±ä¸Šèœä¿æŒä¸€è‡´ï¼‰4=å«èµ·
     */
    64:i32 sendType,

    /**
     * æŠ¹é›¶é‡‘é¢
     */
    65:i64 staffDerate,

    /**
     * å‡å…çš„å°ä½è´¹
     */
    66:i64 reductionTableFee,

    /**
     * æ¡Œå°è®°å½•æ“ä½œæ—¥å¿—
     */
    67:list<StoreTableRecordOptlogDTO> storeTableRecordOptlogDTOs,
    /**
     * èµ èœåˆ—è¡¨
     */
    68:list<StoreTableRecordGiftDTO> storeTableRecordGiftDTOs,

    /**
     * æŒ‰åˆ†ç±»æ˜¾ç¤ºç‚¹èœæ˜ç»†
     */
    69:list<StoreOrderDishCatDTO> StoreDishCatDTOs,

    /**
     * å°ä½è´¹å•ä»·
     */
    70:i64 unitPriceOfTableFee,
}
```







    orderPrice è®¢å•æ€»é‡‘é¢

    /**
     * æ»¡å‡æ´»åŠ¨å‡å…é‡‘é¢
     */
    102:i64 promotionReducePrice,
    
    /**
    * æŠ˜æ‰£æ´»åŠ¨å‡å…é‡‘é¢
    */
    98:i64 promotionRebatePrice,
    
    /**
    * æ»¡å‡æ´»åŠ¨å‡å…é‡‘é¢
    */
    102:i64 promotionReducePrice,
    
     /**
     * åè®®ä¼ä¸šæŠ˜æ‰£
     */
     10:double enterpriseRebate,
     
     /**
     * ç½‘å•æŠ˜æ‰£
     */
     13:double internetRebate,
    
    /**
    * ä¼šå‘˜ä»·æ€»å…±ä¼˜æƒ 
    */
    72:i64 memberRebatePrice,
        
    /**
    * ç½‘å•æŠ˜æ‰£
    */
    13:double internetRebate,


     /**
        * å®ä»˜ï¼Œå®é™…æ”¯ä»˜å¸ç§å¯¹åº”çš„é‡‘é¢
        */
        25:i64 actualPrice,


èµ èœ

â€‹	

```
struct StoreOrderGiftItemDTO {
1:string orderId,
2:i64 storeId,
3:i64 chargeItemId,
4:string chargeItemName,
5:i64 price,
6:double quantity,
7:string reason,
8:i64 staffId,
9:i64 createTime,
10:string unit,
}
```



è®¢å•æ”¯ä»˜ä¿¡æ¯

    /**
     * è®¢å•æ”¯ä»˜ä¿¡æ¯
     * cash_received_amount,ç°é‡‘æ”¶æ¬¾é‡‘é¢
     * cash_amount, ç°é‡‘æ”¯ä»˜é‡‘é¢
     * coupon_amount, ä¼˜æƒ åˆ¸æŠµæ‰£é‡‘é¢
     * prepaid_card_amount, å……å€¼å¡æ”¯ä»˜é‡‘é¢
     * user_account_amount, ç«ä»˜è´¦æˆ·æ”¯ä»˜é‡‘é¢
     * alipay_amount, æ”¯ä»˜å®é‡‘é¢
     * wechat_amount, å¾®ä¿¡æ”¯ä»˜é‡‘é¢
     * ipos_amount, æ™ºèƒ½posæ”¯ä»˜é‡‘é¢
     * yjpay_amount, ä¸€é”®æ”¯ä»˜é‡‘é¢
     * pos_amount, æ™®é€šposæ”¯ä»˜é‡‘é¢
     * public_transfer_amount, å¯¹å…¬è½¬è´¦æ”¯ä»˜é‡‘é¢
     * dynamic_pay_method_id, è‡ªå®šä¹‰æ”¯ä»˜æ–¹å¼ID
     * dynamic_pay_method_name, è‡ªå®šä¹‰æ”¯ä»˜åç§°
     * dynamic_pay_amount, è‡ªå®šä¹‰æ”¯ä»˜é‡‘é¢
     * dynamic_pay_actual_amount, è‡ªå®šä¹‰æ”¯ä»˜å®é™…é‡‘é¢
     * dynamic_pay_type, è‡ªå®šä¹‰æ”¯ä»˜åˆ¸ç±»å‹
     * ====å¾®ä¿¡æ”¯ä»˜ä¿¡æ¯====
     * prepay_id, å¾®ä¿¡çš„é¢„æ”¯ä»˜id
     * app_id, å…¬ä¼—å¸å·id
     * timestamp,æ—¶é—´æˆ³
     * nonce_str, éšæœºå­—ç¬¦ä¸²
     * sign_type, ç­¾åç±»å‹
     * sign,ç­¾å
     */
    44:optional map<string,string> orderPayInfo,



```
/**
 * è®¢å•ä¿ƒé”€æ´»åŠ¨ä¿¡æ¯ 
 */
struct StoreOrderPromotionDTO{
	
	/**
     * è®¢å•IDï¼ˆä¸»é”®ï¼Œå…¨åº“å”¯ä¸€ï¼‰
     */
    1:string orderId,

    /**
     * å•†æˆ·ID
     */
    2:i32 merchantId,

    /**
     * åº—é“ºID
     */
    3:i64 storeId,
    
    /**
     * æ´»åŠ¨ID
     */
    4:i64 promotionId,
    
    /**
     * æ´»åŠ¨ç±»å‹
     */
    5:i32 promotionType,
	
	/**
     * æ´»åŠ¨æ ‡é¢˜
     */
    6:string promotionTitle,
	
	/**
     * æ´»åŠ¨å‡å…é‡‘é¢
     */
    7:i64 promotionDerate,
}
```



```
/**
 * æ¡Œå°è®°å½•
 */
struct StoreOrderTableRecordDTO{
    /**
     * æ¡Œå°è®°å½•IDï¼ˆä¸»é”®å…¨åº“å”¯ä¸€ï¼‰
     */
    1:i64 tableRecordId,

    /**
     * æ‰€åœ¨æ¡Œå°
     */
    2:i64 tableId,

    /**
     * åŒºåŸŸid
     */
    3:i64 areaId,

    /**
     * æ¡Œå°åç§°
     */
    4:string tableName,

    /**
     * åŒºåŸŸåç§°
     */
    5:string areaName,

    /**
     * ä¸»è®¢å•id
     */
    6:string orderId,

    /**
     * æ‹¼æ¡Œåºå·
     */
    7:i32 tableRecordSeq,

    /**
     * å¼€å°æ—¶é—´
     */
    8:i64 tableRecordTime,

    /**
     * æ¡Œå°è®°å½•çŠ¶æ€
     */
    9:i32 tableRecordStatus,

    /**
     * ä»˜æ¬¾çŠ¶æ€
     */
    10:i32 payStatus,

    /**
     * æ˜¯å¦ä¸Šè¿‡èœï¼š0=æ²¡ä¸Šè¿‡èœï¼Œ1=ä¸Šè¿‡èœ
     */
    11:i32 meal,

    /**
     * å°±é¤äººæ•°
     */
    12:i32 customerTraffic,

    /**
     * æ¡Œå°æœåŠ¡å‘˜
     */
    13:i64 staffId,

    /**
     * æ¡Œå°æœåŠ¡å‘˜ç”¨æˆ·id
     */
    14:i64 staffUserId,

    /**
     * ç”¨æˆ·id
     */
    15:i64 userId,

    /**
     * èµ·èœçŠ¶æ€
     */
    16:i32 sendType,
}

```



ä¼˜æƒ æ ¸å¯¹



ä¼ä¸šæŠ˜æ‰£ï¼šäº«å—ä¼ä¸šæŠ˜æ‰£çš„æ€»å•æ•°å’Œé‡‘é¢ï¼›âˆš
ç½‘å•ä¼˜æƒ ï¼šäº«å—è‡ªåŠ©ä¸‹å•æŠ˜æ‰£çš„æ€»å•æ•°å’Œé‡‘é¢ âˆš
å…¬å…³æ‹›å¾…ï¼šäº«å—å…¬å…³æ‹›å¾…çš„è®¢å•æ•°åŠé‡‘é¢ X
æŠ˜æ‰£å’Œå‡å…ï¼šé€šè¿‡æ”¶é“¶å‘˜ç›´æ¥æŠ˜æ‰£æˆ–è€…å‡å…çš„é‡‘é¢ âˆš
ä¼šå‘˜ä¼˜æƒ ï¼šäº«å—ä¼šå‘˜ä»·å¸¦æ¥æŠ˜æ‰£çš„è®¢å•æ•°åŠé‡‘é¢ï¼›âˆš
é¦–ä»½ç‰¹ä»·ï¼šäº«å—é¦–ä»½ç‰¹ä»·äº§ç”Ÿçš„ä¼˜æƒ ï¼› ?
è‡ªå®šä¹‰æ”¶å•æ–¹å¼ä¼˜æƒ ï¼šè‡ªå®šä¹‰æ”¶å•æ–¹å¼çš„æ”¶æ¬¾é‡‘é¢å’Œå®é™…æ”¶æ¬¾é‡‘é¢çš„å·®é¢äº§ç”Ÿçš„ä¼˜æƒ ï¼Œlabel ä¸ºæ”¯ä»˜æ–¹å¼åè¾¹+ä¼˜æƒ ä¸¤ä¸ªå­—  âˆš  æ”¯ä»˜ä¿¡æ¯
å¦‚ï¼šç¾å›¢å›¢è´­ï¼Œæ”¶æ¬¾100ï¼Œå®é™…æ”¶æ¬¾80ï¼Œåº—é“ºä¼˜æƒ ä¸­åˆ—å‡ºï¼šç¾å›¢å›¢è´­ä¼˜æƒ ï¼š20å…ƒï¼ŒXXç¬”ï¼›
æŠ˜æ‰£æ´»åŠ¨ ?
å°ä½è´¹å‡å…   
èµ èœ





StoreOrderActualPayDTO  æ”¯ä»˜ç›¸å…³



```java
Map<String, Object> map = new HashMap<String, Object>();
  StoreOrderActualPayDTO storeOrderActualPayDTO = storeOrderDTO.getStoreOrderActualPayDTO();
  if (storeOrderActualPayDTO == null) {
   return map;
  }
        map.put("order_price", storeOrderActualPayDTO.getOrderPrice());
  map.put("charge_item_price", storeOrderActualPayDTO.getChargeItemPrice());
        map.put("actual_price", storeOrderActualPayDTO.getActualPrice());
        map.put("delivery_fee", storeOrderActualPayDTO.getDeliveryFee());
        map.put("table_fee", storeOrderActualPayDTO.getTableFee());
        map.put("favourable_derate", storeOrderActualPayDTO.getFavourableDerate());
        map.put("internet_rebate_price", storeOrderActualPayDTO.getInternetRebatePrice());
        map.put("enterprise_rebate_price", storeOrderActualPayDTO.getEnterpriseRebatePrice());
        map.put("member_rebate_price", storeOrderActualPayDTO.getMemberRebatePrice());
        map.put("promotion_price",storeOrderActualPayDTO.getPromotionPrice());
        map.put("promotion_rebate_price", storeOrderActualPayDTO.getPromotionRebatePrice());
        map.put("promotion_reduce_price", storeOrderActualPayDTO.getPromotionReducePrice());
        map.put("gratis_price", storeOrderActualPayDTO.getGratisPrice());
        map.put("coupon_amount", storeOrderActualPayDTO.getCouponAmount());
        map.put("dynamic_pay_method_name", storeOrderActualPayDTO.getDynamicPayMethodName() + "");
        map.put("dynamic_pay_derate", storeOrderActualPayDTO.getDynamicPayDerate());
        map.put("cash_received_amount", storeOrderActualPayDTO.getCashReceivedAmount());
        map.put("cash_amount", storeOrderActualPayDTO.getCashAmount());
        map.put("cash_return_amount", storeOrderActualPayDTO.getCashReturnAmount());
        map.put("pay_result_of_dynamic", buildStoreOrderPayResultOfDynamic(storeOrderActualPayDTO.getStoreOrderPayResultOfDynamicPayMethods()));
        map.put("total_derate", storeOrderActualPayDTO.getTotalDerate());
        map.put("total_derate2", storeOrderActualPayDTO.getTotalDerate2());
        map.put("total_rebate_price_v2", storeOrderActualPayDTO.getTotalDerate() - storeOrderDTO.getTotalDerate());
        map.put("total_derate_v2", storeOrderDTO.getTotalDerate());
```



### è®¢å• example

```

{ order_id: '1337283570064082824',
  merchant_id: 26,
  store_id: 64,
  staff_id: 0,
  user_id: 1101766,
  time_bucket_id: 1094,
  client_type: 5, // æ€ä¹ˆä¸‹çš„å• ç»ˆç«¯
  user_client_coupon: 0,  
  enterprise_id: 0,
  enterprise_rebate: 65,
  enterprise_rebate_amount: 0,
  enterprise_rebate_price: 0,
  internet_rebate: 90,
  internet_rebate_amount: 0,
  internet_rebate_price: 0,
  total_rebate: 100,
  total_derate: 0,
  order_currency_id: 1,
  order_price: 9800,  // åŸä»·
  total_price: 9800,  // ?
  favorable_price: 9800, // æŠ˜åé‡‘é¢ ï¼ˆå»æ‰æŠ˜æ‰£ï¼‰
  payable_price: 9800,    // åº”ä»˜
  pay_order_id: '133728360705066605',
  actual_currency_id: 1,
  actual_price: 9800,
  pay_status: 3,
  refund_status: 1,
  order_locked: true,
  trade_status: 6,
  invoice_status: 1,
  invoice_demand: '',
  take_serial_number: 10026,
  take_code: '226910',
  take_mode: 4,  // å–é¤æ–¹å¼   
  take_client_type: 1,
  takeup_status: 3,
  repast_date: 1490630400000,
  update_time: 1490922604734,
  create_time: 1490697957351,  // ä¸‹å•æ—¶é—´ 
  store_order_item_dtos:  //æ˜ç»†
  [ { tid: 55960,
       order_id: '1337283570064082824',
       merchant_id: 26,
       store_id: 64,
       charge_item_id: 3156,
       charge_item_name: 'xtao75324168',
       rebate_able: false,
       amount: 1,
       unit: 'ä»½',
       price: 9800, //å•ä»·
       packed_amount: 1,
       update_time: 1490699040329,
       create_time: 1490697957367,
       store_order_sub_item_dtos: [Object],
       package_price: 0, // æ‰“åŒ…è´¹
       spicy_level: 0,
       coupon_supported: true,
       enable_customer_traffic: false,
       member_price: 0,
       refund_charge_item_num_packed: 0,
       refund_charge_item_num_un_packed: 0,
       gratis_amount: 0,
       gratis_derate: 0,
       member_derate: 0,
       internet_derate: 0,
       enterprise_derate: 0,
       promotion_item_derate: 0,
       promotion_rebate_derate: 0,
       promotion_reduce_derate: 0,
       staff_rebate_derate: 0,
       coupon_derate: 0,
       charge_item_derate: 0,
       store_order_sub_item_size: 1,
       same_sub_item_name: false,
       weight_enabled: false,
       gift_charge_item_num_packed: 0,
       gift_charge_item_num_un_packed: 0 } ],
  store_name: null,
  store_time_bucket_dto:
  { time_bucket_id: 1094,
     merchant_id: 26,
     store_id: 64,
     start_time: 0,
     end_time: 64500000,
     name: 'by',  //  è¥ä¸šæ—¶æ®µ åç§°
     create_time: 1482822471897,
     update_time: 1493953969237,
     deleted: false,
     in_biz_time: false,
     delivery_supported: true,
     delivery_start_time: 0,
     delivery_end_time: 86100000,
     delivery_start_time_for_biz: 0,
     delivery_end_time_for_biz: 64500000,
     table_fee: 500,  
     tips: '' },
  store_order_optlog_dtos: null,
  order_pay_info: null,
  order_refund_info: null,
  user_remain_info: null,
  delivery_fee: 0,
  store_order_delivery_dto:
   { order_id: '1337283570064082824',
     merchant_id: 26,
     store_id: 64,
     contact_name: 'å“ˆå“ˆ',
     contact_phone: '15106938888',
     delivery_staff_id: 1000679,
     delivery_staff_user_id: 1101661,
     delivery_finish_time: 1490922604876,
     delivery_start_time: 1490872534358,
     delivery_assign_time: 1490698560422,
     delivery_building_id: 45,
     delivery_building_name: 'ä¸‡é€š',
     delivery_building_address: 'æœå¤–å¤§è¡—ç”²å…­å·ğŸ‘Œ',
     user_address: 'å›æ¥äº†',
     delivery_status: 5,
     store_shipping: true,
     waimai_order_id: '',
     waimai_type: 0,
     waimai_day_seq: 0,
     waimai_pay_type: 0,
     waimai_first_order: false,
     waimai_favorites: false,
     shipper_phone: '',
     latitude: 0,
     longitude: 0,
     waimai_refund_type: 0,
     waimai_delivery_time: 0,
     poi_money_cent: 0,
     mt_money_cent: 0,
     box_price: 0,
     delay_receive_order_minute: 0,
     receive_order_type: 0,
     remarks: '',
     store_pickup_site_id: 0,
     store_pickup_name: '' },
     place_order_time: 1490697957377,
  pay_order_time: 1490697961587,
  refund_order_time: 0,
  take_serial_time: 1490699040448,
  meal_checkout_time: 1490699040400,
  trade_finish_time: 1490922604878,
  limit_meal_time: true,
  credit_status: 0,
  credit_type: 0,
  site_number: 0,
  package_fee: 0,  // æ€»çš„æ‰“åŒ…è´¹
  produce_package_fee: false,
  store_order_switch_dto: null,
  rebate_type: 0,
  order_remark: '',
  total_rebate_price: 0,
  order_coupon_price: 9800,
  back_order: false,
  skip_take_code: false,
  enable_manual_customer_traffic: false,
  customer_traffic: 0,
  enable_add_dishes: false,
  table_fee: 0,
  member_rebate_price: 0,
  user_remark: '',
  pay_after: false,
  table_record_id: 0,
  parent_order_id: '',
  store_order_table_record_dto: null,
  user_dto:
   { user_id: 1101766,
     name: 'è½',
     mobile: '',
     head: 'http://wx.qlogo.cn/mmopen/pPEzcNMQFWd9UKWoxjVNu7hDnptSc2aJ3ZcybonsdT8jr59mppnMqhic2Kr9eQtFIaVJA8czTFCV8qj7ibpeosnB0Za05gnAxv/0',
     sex: 0,
     id_card: null },
  staff_dto: null,
  store_order_actual_pay_dto: null,
  store_order_refund_item_dtos: null,
  store_order_invoice_dto: null,
  promotion_price: 0,
  buy_prepaid_card_info_dto: null,
  order_lock_status: 2,
  auto_lock_time: 1490701561632,
  timing_take_time: 0,
  timing_take_end_time: 0,
  orders_dine_in: 3,
  orders_take_out: 1,
  orders_in_and_out: 0,
  orders_send_out: 2,
  orders_trade: 6,
  enterprise_rebate_type: 1,
  send_type: 3,
  send_time: 0,
  promotion_rebate_amount: 0,
  promotion_rebate_price: 0,
  promotion_reduce_id: 0,
  promotion_reduce_quota: 0,
  promotion_reduce_amount: 0,
  promotion_reduce_price: 0,
  gratis_price: 0,
  order_coupon_derate: 0,  
  store_order_promotion_dtos: null,
  promotion_reduce_title: '',
  waimai_type: 0,
  store_pickup_site: null,
  app_id: 0,
  store_order_gift_item_dtos: null }



```



[é…ç½®èœå•æƒé™](http://doc.5wei.com/pages/viewpage.action?pageId=18808848#id-02ç«ä»˜äº‘é¤é¥®OS-æƒé™è®¾ç½®-äº”å‘³ç®¡å®¶)

